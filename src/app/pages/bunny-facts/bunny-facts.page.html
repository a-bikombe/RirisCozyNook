<h2>{{ title }}</h2>

<section class="flex row center bunny-facts" [attr.aria-busy]="loading">
    @if (!fact) {
        <loader-dot-component></loader-dot-component>
    } @else {
        <p>
            <button
                class="copy-btn"
                [cdkCopyToClipboard]="fact.fact"
                (cdkCopyToClipboardCopied)="onCopy($event)"
                (mouseenter)="resetCopied()"
            >
                <img
                    class="copy-icon"
                    [src]="copied ? 'svgs/check.svg' : 'svgs/copy.svg'"
                    alt="copy icon"
                />
            </button>
            @if (fact) {
                <button
                    (click)="toggleFavorite()"
                    [attr.aria-pressed]="favorited"
                    aria-label="Toggle favorite"
                >
                    <favorite-icon-component
                        class="fav-icon"
                        [filled]="favorited"
                        [size]="20"
                        color="#e63946"
                    ></favorite-icon-component>
                </button>
            }
            {{ fact!.fact }}
        </p>
    }
</section>

<section *ngIf="!loading">
    <ul class="center list facts">
        @for (favoritedFact of facts; track favoritedFact.id) {
            <li class="fact-row">
                <button
                    class="fav-btn"
                    (click)="favorites.unfavorite(favoritedFact.id); reload()"
                    [attr.aria-pressed]="
                        favorites.isFavorited(favoritedFact.id)
                    "
                >
                    <favorite-icon-component
                        [filled]="true"
                        [size]="20"
                        color="#e63946"
                    ></favorite-icon-component>
                </button>

                <span class="fact-text">{{ favoritedFact.fact }}</span>
            </li>
        }
    </ul>
</section>
